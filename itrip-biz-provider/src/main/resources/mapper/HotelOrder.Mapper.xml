<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
		"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.ekgc.itrip.dao.HotelOrderDao">
	<select id="findOrderRoomCountByQuery" parameterType="java.util.Map" resultMap="java.lang.Integer">
      select
        count (iho.count)
       from
          itrip_hotel_order iho
        where
           iho.roomId=#{roomId}
         and
         date_format(iho.checkInDate,'%Y-%m-%d %H:%i:%s') &lt;= date_format(#{endDate},'%Y-%m-%d %H:%i:%s')
         and
		date_format(iho.checkOutDate,'%Y-%m-%d %H:%i:%s') &gt;= date_format(#{startDate},'%Y-%m-%d %H:%i:%s')
          and
          iho.orderStatus in (0,2)
	</select>

	<select id="findgetPreOrderInfo" parameterType="RoomStoreVO" resultMap="orderMap">
     SELECT
	   ih.id,
	   ih.hotelId,
	   ih.roomTitle,
	   ih.roomPrice
    FROM
	     itrip_hotel_room ih
	<where>
		<trim suffixOverrides="and">
			<if test="id != null">ih.id=#{roomId} and </if>
			<if test="hotelId != null">ih.hotelId=#{hotelId} and </if>
			<if test="roomTitle != null">ih.roomTitle=#{hotelName} and </if>
		</trim>
	</where>
		WHERE
		    hotelId=1;
	</select>
	<resultMap id="orderMap" type="RoomStoreVO">
		<id property="roomId" javaType="java.lang.Long" column="id"/>
		<id property="hotelId" javaType="java.lang.Long" column="hotelId"/>
        <result property="hotelName" javaType="java.lang.String" column="roomTitle"/>
		<result property="price" javaType="java.lang.Double" column="roomPrice"/>
		<result property="creationDate" javaType="java.util.Date" column="creationDate"/>
		<result property="createdBy" javaType="java.lang.Long" column="createdBy"/>
		<result property="modifyDate" javaType="java.util.Date" column="modifyDate"/>
		<result property="modifiedBy" javaType="java.lang.Long" column="modifiedBy"/>
	</resultMap>
</mapper>